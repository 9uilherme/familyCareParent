<section class="content-header">
    <h1>
      Perfil do usuário
      <small>Atualize aqui as informações do seu perfil</small>
    </h1>
    <ol class="breadcrumb">
      <li><a [routerLink]="['']"><i class="fa fa-dashboard"></i> Home</a></li>
      <li class="active">Perfil</li>
    </ol>
  </section>
  
  <!-- Main content -->
<section class="content">
  <div class="row">
  <!-- left column -->
  <div class="col-md-12">
  <!-- general form elements -->
    <div class="box box-primary">
    <!-- form start -->
    <form [formGroup]="perfilUsuarioForm" (submit)="salvar()" role="form">
        <div [ngClass]="classCss" role="alert" *ngIf="message">
          <strong>{{ message.text }}</strong>
        </div>
        <div class="row">
          <div class="col-xs-12 col-sm-12 col-md-8 col-lg-6">
            <div class="box-body box-profile">

              <img (click)="inputImagem.click()" class="profile-user-img img-responsive img-circle" 
                src="{{f.imagemPerfil.value}}" alt="Imagem de perfil" width=300 height=300>

              <input id="inputImagem" #inputImagem type="file" (change)="onFileChange($event)" style="display:none">
              <h3 class="profile-username text-center">{{f.email.value}}</h3>
              <p class="text-muted text-center">{{f.perfil.value}}</p>

              <div [ngClass]="getFormGroupClass(f.nome.invalid,f.nome.dirty)">
                <label for="inputNome" class="control-label">Nome</label>
                <input type="text"
                    formControlName="nome" 
                    class="form-control" 
                    #inputNome 
                    placeholder="Nome"
                    autofocus>
                  <div *ngIf="f.nome.errors" class="invalid-feedback">
                      <span *ngIf="f.nome.errors.required && submited" class="help-block">Nome é obrigatório</span>
                      <span *ngIf="f.nome.errors.minlength" class="help-block">Tamanho mínimo de 1 caracteres</span>
                      <span *ngIf="f.nome.errors.maxlength" class="help-block">Tamanho Máximo de 255 caracteres</span>
                    </div>
                </div>

                <div [ngClass]="getFormGroupClass(f.password.invalid,f.password.dirty)">
                  <label for="inputPassword" class="control-label">Senha</label>
                <input type="password"
                    id="inputPassword"
                    formControlName="password" 
                    class="form-control"
                    placeholder="Senha">
                  <div *ngIf="f.password.errors" class="invalid-feedback">
                      <span *ngIf="f.password.errors.required && submited" class="help-block">Senha é obrigatória</span>
                      <span *ngIf="f.password.errors.minlength" class="help-block">Tamanho mínimo de 6 caracteres</span>
                      <span *ngIf="f.password.errors.maxlength" class="help-block">Tamanho Máximo de 14 caracteres</span>
                    </div>
                </div>
              </div>
              <div class="box-footer">
                <button [disabled]="perfilUsuarioForm.invalid || perfilUsuarioForm.pending"  class="btn btn-primary btn-block">Salvar</button>
              </div>
            </div>  
          </div>
        </form>
      </div>
    </div>
  </div>
</section>